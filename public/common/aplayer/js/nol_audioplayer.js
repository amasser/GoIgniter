/*/////////////////////////////////////////////////////////////////////////
NHK 汎用HLSプレイヤーJS
/////////////////////////////////////////////////////////////////////////*/
var _apProtocol_IE="https:",_apProtocol=window.location.protocol,_apPlayerPath1="/common/aplayer/ifr.html",_apPlayerPath2="/common/aplayer/ifr_legacy.html",_apK=2,_apIframes=[],_apWindowProxy={},$x=0,$s="-st",$s1="tg-",$s2="ev-",$d=document.domain.indexOf($s)>-1||document.domain.indexOf($s1)>-1||document.domain.indexOf($s2)>-1?document.domain:"www.nhk.or.jp",_apPlayerDomain="//"+$d;function _apFire(){"undefined"!=typeof jQuery&&($x>0||($x++,$("<style>.nol_audio_player iframe{border:0;width:100%;height:170px;-webkit-transition:all 0.55s; transition:all 0.55s;border-radius:2px;display:block;}.nol_audio_player iframe.notitle{height:140px;}</style>").prependTo("head"),$(".nol_audio_player").each(function(a){var e="ifrId=_apIfr"+a+"&playerstyle="+$(this).attr("data-skin")+"&autoplay="+$(this).attr("data-autoplay")+"&playertype="+$(this).attr("data-type")+"&hlsurl="+$(this).attr("data-hlsurl"),t=_apQ(e,_apK),i=void 0!=$(this).attr("data-title")?encodeURIComponent($(this).attr("data-title")):"",o=void 0!=$(this).attr("data-aa")?encodeURIComponent($(this).attr("data-aa")):"",r=void 0!=$(this).attr("data-time")?encodeURIComponent($(this).attr("data-time")):"",n=void 0!=$(this).attr("data-aa-header")?encodeURIComponent($(this).attr("data-aa-header")):"",d=void 0!=$(this).attr("data-custom-css")?encodeURIComponent($(this).attr("data-custom-css")):"";$('<iframe id="_apIfr'+a+'" name="_apIfr'+a+'" scrolling="no" frameborder="0"></iframe>').appendTo(this);var p=document.getElementById("_apIfr"+a);_ap_ua.isIE||_ap_ua.isAndroid2x?($("#_apIfr"+a).addClass("flashls"),void 0!=$(this).attr("data-title")&&""!=$(this).attr("data-title")||$("#_apIfr"+a).addClass("notitle"),p.src=_apProtocol_IE+_apPlayerDomain+_apPlayerPath2+"?"+_apK+t+"&title="+i+"&aa="+o+"&stt="+r+"&aahead="+n+"&customcss="+d,p.onload=function(){_apWindowProxy[a]=new Object,_apWindowProxy[a]=new Porthole.WindowProxy("*","_apIfr"+a),_apWindowProxy[a].addEventListener(function(a){if(0==a.data.indexOf("clientHeight")&&$("#"+a.data.split(",")[1]).css({height:a.data.split(",")[2],overflow:"hidden"}),0==a.data.indexOf("playing"))for(h in _apIframes)if(_apIframes[h]!=a.data.split(",")[1])try{_apWindowProxy[h].post("stop")}catch(a){}})}):(p.src=_apProtocol+_apPlayerDomain+_apPlayerPath1,p.onload=function(){p.contentWindow.postMessage("render:"+_apK+encodeURIComponent(e)+"&title="+i+"&aa="+o+"&stt="+r+"&aahead="+n+"&customcss="+d,_apProtocol+_apPlayerDomain)}),_apIframes.push("_apIfr"+a)}),_ap_ua.isIE||_ap_ua.isAndroid2x||window.addEventListener("message",function(a){if(0==a.data.indexOf("clientHeight")&&$("#"+a.data.split(",")[1]).css({height:a.data.split(",")[2],overflow:"hidden"}),0==a.data.indexOf("playing"))for(i in _apIframes)if(_apIframes[i]!=a.data.split(",")[1]){var e=document.getElementById(_apIframes[i]);try{e.contentWindow.postMessage("stop",_apProtocol+_apPlayerDomain)}catch(a){}}0==a.data.indexOf("reload")&&location.reload()},!1)))}function _apQ(a,e){a=encodeURIComponent(a);for(var t="",i=0;i<a.length;i++)t+=String.fromCharCode(a.charCodeAt(i)+e);return t}function addOnload(a){try{window.addEventListener("load",a,!1)}catch(e){window.attachEvent("onload",a)}}function _apLoad(){"undefined"!=typeof jQuery?_portHole():(_apJQueryScript=document.createElement("script"),_apJQueryScript.src="/common/jquery/jquery-2.2.js",_apJQueryScript.addEventListener?_apJQueryScript.addEventListener("load",_portHole,!1):_apJQueryScript.readyState&&(_apJQueryScript.onreadystatechange=_portHole),document.body.appendChild(_apJQueryScript))}function _portHole(){_ap_ua.isIE||_ap_ua.isAndroid2x?(_apPortHoleScript=document.createElement("script"),_apPortHoleScript.src=_apPlayerDomain+"/common/aplayer/js/porthole.min.js",_apPortHoleScript.addEventListener?_apPortHoleScript.addEventListener("load",_apFire,!1):_apPortHoleScript.readyState&&(_apPortHoleScript.onreadystatechange=_apFire),document.body.appendChild(_apPortHoleScript)):_apFire()}void 0===window.console&&(window.console={log:function(){}}),addOnload(function(){_apLoad()});var _ap_ieVer,_ap_ua={};_ap_ua.name=window.navigator.userAgent.toLowerCase(),_ap_ua.isIE=_ap_ua.name.indexOf("msie")>=0||_ap_ua.name.indexOf("trident")>=0,_ap_ua.isiPhone=_ap_ua.name.indexOf("iphone")>=0,_ap_ua.isiPod=_ap_ua.name.indexOf("ipod")>=0,_ap_ua.isiPad=_ap_ua.name.indexOf("ipad")>=0,_ap_ua.isiOS=_ap_ua.isiPhone||_ap_ua.isiPod||_ap_ua.isiPad,_ap_ua.isAndroid=_ap_ua.name.indexOf("android")>=0,_ap_ua.isAndroid2x=_ap_ua.name.indexOf("android 2")>=0,_ap_ua.isTablet=_ap_ua.isiPad||_ap_ua.isAndroid&&_ap_ua.name.indexOf("mobile")<0,_ap_ua.isIE&&(_ap_ua.verArray=/(msie|rv:?)\s?([0-9]{1,})([\.0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isiOS&&(_ap_ua.verArray=/(os)\s([0-9]{1,})([\_0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isAndroid&&(_ap_ua.verArray=/(android)\s([0-9]{1,})([\.0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isMacSafari=!_ap_ua.isiOS&&!_ap_ua.isAndroid&&-1!==_ap_ua.name.indexOf("safari")&&-1===_ap_ua.name.indexOf("chrome"),_ap_ua.isIE&&(_ap_ieVer=parseInt(_ap_ua.name.match(/((msie|MSIE)\s|rv:)([\d\.]+)/)[3],10));